language: go

go:
  - 1.11.x
script:
  - make fmt
  - make test

notifications:
  email:
    on_success: never
    on_failure: always

before_deploy:
  - make release

deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: ipdrq6CK5UPpWycbL7WepzV633AaGTY1s1oUgJGPBSyCEXsOlQudu2H28kWe+veV7HxSQBWeQcAkyCbs5NusYAr+76p2QdGz1392HSbOyQjt0PsXU5UO8GF/uHPMflvI4AMi9tN29j2fYkrWCrmyMtEO+Kfaer1SA+0ybhqk1x8qO+0SZ+CYKpdniLd0WsS1vfPC3YtXviFzutqFQjaYwAcb/BKH1HCiAMxDhqYpJkiHBzcrYLDzWEeTAxC/Q/NveLektOj2vB+JC1/hIHBG94/MLJmFnEZwEXvPiPQtExhk2T1EQk+/C9FxspXzWql3c2kQyIQz2wxWVWuKFS7gJi1yN+BA3kqlnDqL/r71d6tcVaq1ZMaynb9W/E20pcKINcim/qfJ11hOCqciEnPTHGyMKhp9q8LnqzFWouxPdZKwNuHrdYWJD7q0lcRLuGCgA37mlsPRcpOhj8TPkrgcfpDi7Ki93E/PdjQLp8svfyNYkk90B5Cr56jnb50K+6p9/vZRlKD5Mg4gGbbWwf5i7yOKB6q6FKj6Ml3L1/Xnb8QZhGM3n4o/Vm01j8vSKh+BEA+LCbB8XbAOdblcBcnPURAaHHoTEcbLm/rApNovofWL9InhNZ+Im6V6l8QaZCHMY11AOA08yiZuRf7jx98Nj2Ae+ECBZ/1pyv5M66EYGnw=
  file:
   - bin/retry-mac
   - bin/retry-linux
   - bin/retry.exe
  on:
    repo: martinezdelariva/retry
    tags: true
